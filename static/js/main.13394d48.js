(()=>{"use strict";var e={3871:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});n(9896);var a=n(2010),r=n(5004),i=n(5222),o=n(885),l=n(9385),s=n(1258),c=n(3426),u=n(4465),d=n(327),f=(n(8874),n(9531),(0===d.default.apps.length?d.default.initializeApp({apiKey:"AIzaSyD55xZGTPX9KcHFpxn8dSEOp7E6kM7LKcs",authDomain:"messagingapp3-8bf85.firebaseapp.com",projectId:"messagingapp3-8bf85",storageBucket:"messagingapp3-8bf85.appspot.com",messagingSenderId:"503248088500",appId:"1:503248088500:web:744d5cd5ce77cc415356e1"}):d.default.app()).firestore()),h=d.default.auth(),p=n(2629);const g=function(e){var t=e.navigation,n=(0,r.useState)(""),a=(0,o.default)(n,2),i=a[0],d=a[1],f=(0,r.useState)(""),g=(0,o.default)(f,2),x=g[0],y=g[1];(0,r.useEffect)((function(){return h.onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);var j=function(){h.signInWithEmailAndPassword(i,x).catch((function(e){return alert(e)}))};return(0,p.jsxs)(u.default,{behavior:"padding",enabled:!0,style:m.container,children:[(0,p.jsx)(c.default,{style:"light"}),(0,p.jsx)(s.Image,{source:{uri:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTvDQhI96KOJP4eaCohSsODK8xtaWhIUbLHFw&usqp=CAU"},style:{width:200,height:200}}),(0,p.jsxs)(l.default,{style:m.inputContainer,children:[(0,p.jsx)(s.Input,{placeholder:"Email",autoFocus:!0,type:"email",value:i,onChangeText:function(e){return d(e)}}),(0,p.jsx)(s.Input,{placeholder:"Password",secureTextEntry:!0,type:"password",value:x,onChangeText:function(e){return y(e)},onSubmitEditing:j})]}),(0,p.jsx)(s.Button,{containerStyle:m.button,onPress:j,title:"Login"}),(0,p.jsx)(s.Button,{onPress:function(){return t.navigate("Register")},containerStyle:m.button,type:"outline",title:"Register"}),(0,p.jsx)(l.default,{style:{height:100}})]})};var m=a.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}}),x=n(7736);const y=function(e){var t=e.navigation,n=(0,r.useState)(""),a=(0,o.default)(n,2),i=a[0],d=a[1],f=(0,r.useState)(""),g=(0,o.default)(f,2),m=g[0],x=g[1],y=(0,r.useState)(""),v=(0,o.default)(y,2),b=v[0],C=v[1],w=(0,r.useState)(""),S=(0,o.default)(w,2),O=S[0],T=S[1];(0,r.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Back to Login"})}),[t]);var E=function(){h.createUserWithEmailAndPassword(m,b).then((function(e){e.user.updateProfile({displayName:i,photoURL:O||"https://cdn-icons-png.flaticon.com/512/3541/3541871.png"})})).catch((function(e){return alert(e.message)}))};return(0,p.jsxs)(u.default,{behavior:"padding",style:j.container,children:[(0,p.jsx)(c.default,{style:"light"}),(0,p.jsx)(s.Text,{h3:!0,style:{marginBottom:50},children:"Create a account"}),(0,p.jsxs)(l.default,{style:j.inputContainer,children:[(0,p.jsx)(s.Input,{placeholder:"Full Name",autofocus:!0,type:"text",value:i,onChangeText:function(e){return d(e)}}),(0,p.jsx)(s.Input,{placeholder:"Email",type:"email",value:m,onChangeText:function(e){return x(e)}}),(0,p.jsx)(s.Input,{placeholder:"Password",type:"password",secureTextEntry:!0,value:b,onChangeText:function(e){return C(e)}}),(0,p.jsx)(s.Input,{placeholder:"Profile Picture URL (Optional)",type:"text",value:O,onChangeText:function(e){return T(e)},onSubmitEditing:E})]}),(0,p.jsx)(s.Button,{containerStyle:j.button,raised:!0,onPress:E,title:"Register"}),(0,p.jsx)(l.default,{style:{height:100}})]})};var j=a.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}}),v=n(3224),b=n(5288),C=n(7602);const w=function(e){var t,n,a,i=e.id,l=e.chatName,c=e.enterChat,u=(0,r.useState)([]),d=(0,o.default)(u,2),h=d[0],g=d[1];return(0,r.useEffect)((function(){return f.collection("chats").doc(i).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return g(e.docs.map((function(e){return e.data()})))}))})),(0,p.jsxs)(s.ListItem,{onPress:function(){return c(i,l)},bottomDivider:!0,children:[(0,p.jsx)(s.Avatar,{rounded:!0,source:{uri:(null==h||null==(t=h[0])?void 0:t.photoURL)||"https://cdn-icons-png.flaticon.com/512/3541/3541871.png"}}),(0,p.jsxs)(s.ListItem.Content,{children:[(0,p.jsx)(s.ListItem.Title,{style:{fontWeight:"800"},children:l}),(0,p.jsxs)(s.ListItem.Subtitle,{numberOfLines:1,ellipsizeMode:"tail",children:[null==h||null==(n=h[0])?void 0:n.displayName,": ",null==h||null==(a=h[0])?void 0:a.message]})]})]},i)};a.default.create({});var S=n(6652),O=n(2594);const T=function(e){var t=e.navigation,n=(0,r.useState)([]),a=(0,o.default)(n,2),i=a[0],c=a[1],u=function(){h.signOut().then((function(){t.replace("Login")}))};(0,r.useEffect)((function(){return f.collection("chats").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),(0,r.useLayoutEffect)((function(){t.setOptions({title:"Chat App",headerStyle:{backgroundColor:"#fff"},headerTitleStyle:{color:"black"},headerTintColor:"black",headerLeft:function(){var e;return(0,p.jsx)(l.default,{style:{marginLeft:20},children:(0,p.jsx)(b.default,{onPress:u,activeOpacity:.5,children:(0,p.jsx)(s.Avatar,{rounded:!0,source:{uri:null==h||null==(e=h.currentUser)?void 0:e.photoURL}})})})},headerRight:function(){return(0,p.jsxs)(l.default,{style:{marginRight:20,flexDirection:"row",justifyContent:"space-between",width:80},children:[(0,p.jsx)(b.default,{activeOpacity:.5,children:(0,p.jsx)(S.default,{name:"camerao",size:24,color:"black"})}),(0,p.jsx)(b.default,{onPress:function(){return t.navigate("AddChat")},activeOpacity:.5,children:(0,p.jsx)(O.default,{name:"pencil",size:24,color:"black"})})]})}})}),[t]);var d=function(e,n){t.navigate("Chat",{id:e,chatName:n})};return(0,p.jsx)(C.default,{children:(0,p.jsx)(v.default,{style:E.inputContainer,children:i.map((function(e){var t=e.id,n=e.data.chatName;return(0,p.jsx)(w,{id:t,chatName:n,enterChat:d},t)}))})})};var E=a.default.create({container:{height:"100%"}}),L=n(5861),k=n(9819);const I=function(e){var t=e.navigation,n=(0,r.useState)(""),a=(0,o.default)(n,2),i=a[0],c=a[1];(0,r.useLayoutEffect)((function(){t.setOptions({title:"Add a new chat",headerBackTitle:"Chats"})}),[t]);var u=function(){var e=(0,L.default)((function*(){yield f.collection("chats").add({chatName:i}).then((function(){t.goBack()})).catch((function(e){return alert(e)}))}));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)(l.default,{style:P.container,children:[(0,p.jsx)(s.Input,{placeholder:"Enter a chat name",autoFocus:!0,value:i,onChangeText:function(e){return c(e)},onSubmitEditing:u,leftIcon:(0,p.jsx)(k.default,{name:"wechat",type:"antdesign",size:24,color:"",black:!0})}),(0,p.jsx)(s.Button,{disabled:!i,onPress:u,title:"Create new chat"})]})};var P=a.default.create({container:{height:"100%",padding:30,backgroundColor:"white"}}),R=n(1054),B=n(4760),A=n(6591),N=n(2960),U=n(7129),z=n(5295),_=n(4504),D=n(2152);const W=function(e){var t=e.navigation,n=e.route,a=(0,r.useState)(""),i=(0,o.default)(a,2),c=i[0],g=i[1],m=(0,r.useState)([]),x=(0,o.default)(m,2),y=x[0],j=x[1],w=y.slice(-1);(0,r.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){var e;return(0,p.jsxs)(l.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,p.jsx)(s.Avatar,{rounded:!0,source:{uri:(null==(e=w[0])?void 0:e.data.photoURL)||"https://cdn-icons-png.flaticon.com/512/3541/3541871.png"}}),(0,p.jsx)(R.default,{style:{color:"white",marginLeft:10,fontWeight:"700"},children:n.params.chatName})]})},headerLeft:function(){return(0,p.jsx)(b.default,{style:{marginLeft:10},onPress:t.goBack,children:(0,p.jsx)(S.default,{name:"arrowleft",size:24,color:"white"})})},headerRight:function(){return(0,p.jsxs)(l.default,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20},children:[(0,p.jsx)(b.default,{children:(0,p.jsx)(z.default,{name:"video-camera",size:24,color:"white"})}),(0,p.jsx)(b.default,{children:(0,p.jsx)(_.default,{name:"call",size:24,color:"white"})})]})}})}),[t,y]);var O=function(){N.default.dismiss(),f.collection("chats").doc(n.params.id).collection("messages").add({timestamp:d.default.firestore.FieldValue.serverTimestamp(),message:c,displayName:h.currentUser.displayName,email:h.currentUser.email,photoURL:h.currentUser.photoURL}),g("")};return(0,r.useLayoutEffect)((function(){return f.collection("chats").doc(n.params.id).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return j(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[n]),(0,p.jsxs)(C.default,{style:{flex:1,backgroundColor:"white"},children:[(0,p.jsx)(B.default,{style:"light"}),(0,p.jsx)(u.default,{behaviour:"ios"===D.default.OS?"padding":"height",style:F.container,keyboardVerticalOffset:90,children:(0,p.jsx)(U.default,{onPress:N.default.dismiss,children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(v.default,{contentContainerStyle:{paddingTop:15},children:y.map((function(e){var t=e.id,n=e.data;return n.email===h.currentUser.email?(0,p.jsxs)(l.default,{style:F.receiver,children:[(0,p.jsx)(s.Avatar,{containerStyle:{position:"absolute",bottom:-15,right:-5},position:"absolute",bottom:-15,right:-5,rounded:!0,size:30,source:{uri:n.photoURL}}),(0,p.jsx)(R.default,{style:F.receiverText,children:n.message})]},t):(0,p.jsxs)(l.default,{style:F.sender,children:[(0,p.jsx)(s.Avatar,{containerStyle:{position:"absolute",bottom:-15,left:-5},position:"absolute",bottom:-15,left:-5,rounded:!0,size:30,source:{uri:n.photoURL}}),(0,p.jsx)(R.default,{style:F.senderText,children:n.message}),(0,p.jsx)(R.default,{style:F.senderName,children:n.displayName})]},t)}))}),(0,p.jsxs)(l.default,{style:F.footer,children:[(0,p.jsx)(A.default,{value:c,onChangeText:function(e){return g(e)},onSubmitEditing:O,placeholder:"Chat Message",style:F.textInput}),(0,p.jsx)(b.default,{onPress:O,activeOpacity:.5,children:(0,p.jsx)(_.default,{name:"send",size:24,color:"#2B68E6"})})]})]})})})]})};var F=a.default.create({container:{flex:1},receiver:{alignSelf:"flex-end",marginRight:15,backgroundColor:"#ECECEC",padding:15,borderRadius:20,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{alignSelf:"flex-start",margin:15,backgroundColor:"#2B68E6",padding:15,borderRadius:20,maxWidth:"80%",position:"relative"},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"},senderText:{marginLeft:10,marginBottom:15,fontWeight:"500",color:"white"},receiverName:{left:10,paddingRight:10,fontSize:10,color:"black"},receiverText:{marginLeft:10,fontWeight:"500",color:"black"},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},textInput:{bottom:0,height:40,flex:1,marginRight:15,backgroundColor:"#ECECEC",padding:10,color:"grey",borderRadius:30}}),M=(0,x.default)(),K={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white",headerTitleAlign:"center"};function H(){return(0,p.jsx)(i.default,{children:(0,p.jsxs)(M.Navigator,{screenOptions:K,children:[(0,p.jsx)(M.Screen,{name:"Login",component:g}),(0,p.jsx)(M.Screen,{name:"Register",component:y}),(0,p.jsx)(M.Screen,{name:"Home",component:T}),(0,p.jsx)(M.Screen,{name:"AddChat",component:I}),(0,p.jsx)(M.Screen,{name:"Chat",component:W})]})})}a.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,(()=>{var e=[];n.O=(t,a,r,i)=>{if(!a){var o=1/0;for(u=0;u<e.length;u++){for(var[a,r,i]=e[u],l=!0,s=0;s<a.length;s++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](a[s])))?a.splice(s--,1):(l=!1,i<o&&(o=i));if(l){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,r,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var l=2&r&&a;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>o[e]=()=>a[e]));return o.default=()=>a,n.d(i,o),i}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/messaging_app/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var r,i,[o,l,s]=a,c=0;if(o.some((t=>0!==e[t]))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(s)var u=s(n)}for(t&&t(a);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},a=self.webpackChunkweb=self.webpackChunkweb||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n.O(void 0,[112],(()=>n(6271)));a=n.O(a)})();
//# sourceMappingURL=main.13394d48.js.map